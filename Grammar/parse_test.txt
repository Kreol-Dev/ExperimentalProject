Parse tree from test.def:
Root(2001)
  Operator(2006)
    IdentifierOrCall(2004)
      IDENTIFIER(1023): "name_generator", line: 1, col: 1
    EQUALS(1011): "=", line: 1, col: 16
    Context(2007)
      OPEN_TABLE(1002): "{", line: 2, col: 1
      List(2008)
        IdentifierOrCall(2004)
          IDENTIFIER(1023): "scope", line: 4, col: 2
        EQUALS(1011): "=", line: 4, col: 8
        Context(2007)
          Expression(2017)
            OrTerm(2016)
              AndTerm(2015)
                EqTerm(2014)
                  RelateTerm(2013)
                    AddTerm(2012)
                      MulTerm(2011)
                        Factor(2010)
                          Scope(2002)
                            IdentifierOrCall(2004)
                              IDENTIFIER(1023): "has_name", line: 4, col: 10
        IdentifierOrCall(2004)
          IDENTIFIER(1023): "action", line: 5, col: 2
        EQUALS(1011): "=", line: 5, col: 9
        Context(2007)
          OPEN_TABLE(1002): "{", line: 6, col: 2
          List(2008)
            IdentifierOrCall(2004)
              IDENTIFIER(1023): "set_name", line: 7, col: 3
            EQUALS(1011): "=", line: 7, col: 12
            Context(2007)
              Expression(2017)
                OrTerm(2016)
                  AndTerm(2015)
                    EqTerm(2014)
                      RelateTerm(2013)
                        AddTerm(2012)
                          MulTerm(2011)
                            Factor(2010)
                              Scope(2002)
                                IdentifierOrCall(2004)
                                  IDENTIFIER(1023): "concat", line: 7, col: 14
                                  OPEN_PARENT(1006): "(", line: 7, col: 20
                                  CallArgs(2005)
                                    Expression(2017)
                                      OrTerm(2016)
                                        AndTerm(2015)
                                          EqTerm(2014)
                                            RelateTerm(2013)
                                              AddTerm(2012)
                                                MulTerm(2011)
                                                  Factor(2010)
                                                    Scope(2002)
                                                      IdentifierOrCall(2004)
                                                        IDENTIFIER(1023): "random_from", line: 7, col: 21
                                                        OPEN_PARENT(1006): "(", line: 7, col: 32
                                                        CallArgs(2005)
                                                          Expression(2017)
                                                            OrTerm(2016)
                                                              AndTerm(2015)
                                                                EqTerm(2014)
                                                                  RelateTerm(2013)
                                                                    AddTerm(2012)
                                                                      MulTerm(2011)
                                                                        Factor(2010)
                                                                          Scope(2002)
                                                                            IdentifierOrCall(2004)
                                                                              IDENTIFIER(1023): "names_scope", line: 7, col: 33
                                                          DELIMITER(1005): ",", line: 7, col: 44
                                                          Expression(2017)
                                                            OrTerm(2016)
                                                              AndTerm(2015)
                                                                EqTerm(2014)
                                                                  RelateTerm(2013)
                                                                    AddTerm(2012)
                                                                      MulTerm(2011)
                                                                        Factor(2010)
                                                                          Scope(2002)
                                                                            IdentifierOrCall(2004)
                                                                              IDENTIFIER(1023): "most_weight", line: 7, col: 46
                                                                              OPEN_PARENT(1006): "(", line: 7, col: 57
                                                                              CallArgs(2005)
                                                                                Expression(2017)
                                                                                  OrTerm(2016)
                                                                                    AndTerm(2015)
                                                                                      EqTerm(2014)
                                                                                        RelateTerm(2013)
                                                                                          AddTerm(2012)
                                                                                            MulTerm(2011)
                                                                                              Factor(2010)
                                                                                                Scope(2002)
                                                                                                  IdentifierOrCall(2004)
                                                                                                    IDENTIFIER(1023): "fallback_names", line: 7, col: 58
                                                                                DELIMITER(1005): ",", line: 7, col: 72
                                                                                Expression(2017)
                                                                                  OrTerm(2016)
                                                                                    AndTerm(2015)
                                                                                      EqTerm(2014)
                                                                                        RelateTerm(2013)
                                                                                          AddTerm(2012)
                                                                                            MulTerm(2011)
                                                                                              Factor(2010)
                                                                                                Scope(2002)
                                                                                                  IdentifierOrCall(2004)
                                                                                                    IDENTIFIER(1023): "new_name", line: 7, col: 74
                                                                                                    OPEN_PARENT(1006): "(", line: 7, col: 82
                                                                                                    CallArgs(2005)
                                                                                                      Expression(2017)
                                                                                                        OrTerm(2016)
                                                                                                          AndTerm(2015)
                                                                                                            EqTerm(2014)
                                                                                                              RelateTerm(2013)
                                                                                                                AddTerm(2012)
                                                                                                                  MulTerm(2011)
                                                                                                                    Factor(2010)
                                                                                                                      Scope(2002)
                                                                                                                        IdentifierOrCall(2004)
                                                                                                                          IDENTIFIER(1023): "culture_names", line: 7, col: 83
                                                                                                      DELIMITER(1005): ",", line: 7, col: 96
                                                                                                      Expression(2017)
                                                                                                        OrTerm(2016)
                                                                                                          AndTerm(2015)
                                                                                                            EqTerm(2014)
                                                                                                              RelateTerm(2013)
                                                                                                                AddTerm(2012)
                                                                                                                  MulTerm(2011)
                                                                                                                    Factor(2010)
                                                                                                                      Atom(2009)
                                                                                                                        STRING(1025): ""Error name"", line: 7, col: 98
                                                                                                    CLOSE_PARENT(1007): ")", line: 7, col: 110
                                                                              CLOSE_PARENT(1007): ")", line: 7, col: 111
                                                        CLOSE_PARENT(1007): ")", line: 7, col: 112
                                    DELIMITER(1005): ",", line: 7, col: 113
                                    Expression(2017)
                                      OrTerm(2016)
                                        AndTerm(2015)
                                          EqTerm(2014)
                                            RelateTerm(2013)
                                              AddTerm(2012)
                                                MulTerm(2011)
                                                  Factor(2010)
                                                    Atom(2009)
                                                      STRING(1025): "" "", line: 8, col: 8
                                    DELIMITER(1005): ",", line: 8, col: 11
                                    Expression(2017)
                                      OrTerm(2016)
                                        AndTerm(2015)
                                          EqTerm(2014)
                                            RelateTerm(2013)
                                              AddTerm(2012)
                                                MulTerm(2011)
                                                  Factor(2010)
                                                    Scope(2002)
                                                      IdentifierOrCall(2004)
                                                        IDENTIFIER(1023): "single_from", line: 9, col: 8
                                                        OPEN_PARENT(1006): "(", line: 9, col: 19
                                                        CallArgs(2005)
                                                          Expression(2017)
                                                            OrTerm(2016)
                                                              AndTerm(2015)
                                                                EqTerm(2014)
                                                                  RelateTerm(2013)
                                                                    AddTerm(2012)
                                                                      MulTerm(2011)
                                                                        Factor(2010)
                                                                          Scope(2002)
                                                                            IdentifierOrCall(2004)
                                                                              IDENTIFIER(1023): "second_name", line: 9, col: 20
                                                          DELIMITER(1005): ",", line: 9, col: 31
                                                          Expression(2017)
                                                            OrTerm(2016)
                                                              AndTerm(2015)
                                                                EqTerm(2014)
                                                                  RelateTerm(2013)
                                                                    AddTerm(2012)
                                                                      MulTerm(2011)
                                                                        Factor(2010)
                                                                          Atom(2009)
                                                                            STRING(1025): ""Error second name"", line: 9, col: 33
                                                        CLOSE_PARENT(1007): ")", line: 9, col: 52
                                  CLOSE_PARENT(1007): ")", line: 9, col: 53
            IdentifierOrCall(2004)
              IDENTIFIER(1023): "names_scope", line: 10, col: 3
            EQUALS(1011): "=", line: 10, col: 15
            Context(2007)
              OPEN_TABLE(1002): "{", line: 11, col: 3
              List(2008)
                IdentifierOrCall(2004)
                  IDENTIFIER(1023): "union", line: 12, col: 4
                EQUALS(1011): "=", line: 12, col: 10
                Context(2007)
                  OPEN_TABLE(1002): "{", line: 12, col: 12
                  List(2008)
                    IdentifierOrCall(2004)
                      IDENTIFIER(1023): "faction_names", line: 12, col: 13
                    IdentifierOrCall(2004)
                      IDENTIFIER(1023): "traits_names", line: 12, col: 27
                  CLOSE_TABLE(1003): "}", line: 12, col: 39
                IdentifierOrCall(2004)
                  IDENTIFIER(1023): "intersect", line: 13, col: 4
                EQUALS(1011): "=", line: 13, col: 14
                Context(2007)
                  Expression(2017)
                    OrTerm(2016)
                      AndTerm(2015)
                        EqTerm(2014)
                          RelateTerm(2013)
                            AddTerm(2012)
                              MulTerm(2011)
                                Factor(2010)
                                  Scope(2002)
                                    IdentifierOrCall(2004)
                                      IDENTIFIER(1023): "culture_names", line: 13, col: 16
              CLOSE_TABLE(1003): "}", line: 14, col: 3
            IdentifierOrCall(2004)
              IDENTIFIER(1023): "fallback_names", line: 15, col: 3
            EQUALS(1011): "=", line: 15, col: 18
            Context(2007)
              OPEN_TABLE(1002): "{", line: 16, col: 3
              List(2008)
                IdentifierOrCall(2004)
                  IDENTIFIER(1023): "union", line: 17, col: 4
                EQUALS(1011): "=", line: 17, col: 10
                Context(2007)
                  OPEN_TABLE(1002): "{", line: 17, col: 12
                  List(2008)
                    IdentifierOrCall(2004)
                      IDENTIFIER(1023): "faction_names", line: 17, col: 13
                    IdentifierOrCall(2004)
                      IDENTIFIER(1023): "traits_names", line: 17, col: 27
                  CLOSE_TABLE(1003): "}", line: 17, col: 39
                IdentifierOrCall(2004)
                  IDENTIFIER(1023): "weight", line: 18, col: 4
                EQUALS(1011): "=", line: 18, col: 11
                Context(2007)
                  Expression(2017)
                    OrTerm(2016)
                      AndTerm(2015)
                        EqTerm(2014)
                          RelateTerm(2013)
                            AddTerm(2012)
                              MulTerm(2011)
                                Factor(2010)
                                  Scope(2002)
                                    IdentifierOrCall(2004)
                                      IDENTIFIER(1023): "similar_traits", line: 18, col: 13
                                      OPEN_PARENT(1006): "(", line: 18, col: 27
                                      CallArgs(2005)
                                        Expression(2017)
                                          OrTerm(2016)
                                            AndTerm(2015)
                                              EqTerm(2014)
                                                RelateTerm(2013)
                                                  AddTerm(2012)
                                                    MulTerm(2011)
                                                      Factor(2010)
                                                        Scope(2002)
                                                          IdentifierOrCall(2004)
                                                            IDENTIFIER(1023): "traits_names", line: 18, col: 28
                                      CLOSE_PARENT(1007): ")", line: 18, col: 40
              CLOSE_TABLE(1003): "}", line: 19, col: 3
            IdentifierOrCall(2004)
              IDENTIFIER(1023): "xyz", line: 20, col: 3
              OPEN_PARENT(1006): "(", line: 20, col: 6
              CallArgs(2005)
                Expression(2017)
                  OrTerm(2016)
                    AndTerm(2015)
                      EqTerm(2014)
                        RelateTerm(2013)
                          AddTerm(2012)
                            MulTerm(2011)
                              Factor(2010)
                                Atom(2009)
                                  NUMBER(1024): "1", line: 20, col: 7
                            SUB(1014): "-", line: 20, col: 9
                            MulTerm(2011)
                              Factor(2010)
                                Atom(2009)
                                  NUMBER(1024): "1", line: 20, col: 11
                            ADD(1013): "+", line: 20, col: 13
                            MulTerm(2011)
                              Factor(2010)
                                Atom(2009)
                                  NUMBER(1024): "2", line: 20, col: 15
                              MUL(1016): "*", line: 20, col: 17
                              Factor(2010)
                                Atom(2009)
                                  NUMBER(1024): "2", line: 20, col: 19
                              MUL(1016): "*", line: 20, col: 21
                              Factor(2010)
                                OPEN_PARENT(1006): "(", line: 20, col: 23
                                Expression(2017)
                                  OrTerm(2016)
                                    AndTerm(2015)
                                      EqTerm(2014)
                                        RelateTerm(2013)
                                          AddTerm(2012)
                                            MulTerm(2011)
                                              Factor(2010)
                                                Atom(2009)
                                                  NUMBER(1024): "2", line: 20, col: 24
                                            SUB(1014): "-", line: 20, col: 26
                                            MulTerm(2011)
                                              Factor(2010)
                                                SUB(1014): "-", line: 20, col: 28
                                                Atom(2009)
                                                  NUMBER(1024): "1", line: 20, col: 29
                                CLOSE_PARENT(1007): ")", line: 20, col: 30
                            ADD(1013): "+", line: 20, col: 32
                            MulTerm(2011)
                              Factor(2010)
                                Atom(2009)
                                  NUMBER(1024): "2", line: 20, col: 34
              CLOSE_PARENT(1007): ")", line: 20, col: 35
            EQUALS(1011): "=", line: 20, col: 37
            Context(2007)
              OPEN_TABLE(1002): "{", line: 20, col: 39
              List(2008)
                IdentifierOrCall(2004)
                  IDENTIFIER(1023): "z", line: 20, col: 41
                EQUALS(1011): "=", line: 20, col: 43
                Context(2007)
                  Expression(2017)
                    OrTerm(2016)
                      AndTerm(2015)
                        EqTerm(2014)
                          RelateTerm(2013)
                            AddTerm(2012)
                              MulTerm(2011)
                                Factor(2010)
                                  Scope(2002)
                                    IdentifierOrCall(2004)
                                      IDENTIFIER(1023): "val", line: 20, col: 45
              CLOSE_TABLE(1003): "}", line: 20, col: 49
            IdentifierOrCall(2004)
              IDENTIFIER(1023): "second_name", line: 21, col: 3
            EQUALS(1011): "=", line: 21, col: 15
            Context(2007)
              OPEN_TABLE(1002): "{", line: 22, col: 3
              List(2008)
                IdentifierOrCall(2004)
                  IDENTIFIER(1023): "if", line: 23, col: 4
                  OPEN_PARENT(1006): "(", line: 23, col: 6
                  CallArgs(2005)
                    Expression(2017)
                      OrTerm(2016)
                        AndTerm(2015)
                          EqTerm(2014)
                            RelateTerm(2013)
                              AddTerm(2012)
                                MulTerm(2011)
                                  Factor(2010)
                                    Scope(2002)
                                      IdentifierOrCall(2004)
                                        IDENTIFIER(1023): "sex", line: 23, col: 7
                            EQUALS(1011): "=", line: 23, col: 11
                            RelateTerm(2013)
                              AddTerm(2012)
                                MulTerm(2011)
                                  Factor(2010)
                                    Scope(2002)
                                      IdentifierOrCall(2004)
                                        IDENTIFIER(1023): "female", line: 23, col: 13
                          AND(1008): "and", line: 23, col: 20
                          EqTerm(2014)
                            RelateTerm(2013)
                              AddTerm(2012)
                                MulTerm(2011)
                                  Factor(2010)
                                    Scope(2002)
                                      IdentifierOrCall(2004)
                                        IDENTIFIER(1023): "family_status", line: 23, col: 24
                            EQUALS(1011): "=", line: 23, col: 38
                            RelateTerm(2013)
                              AddTerm(2012)
                                MulTerm(2011)
                                  Factor(2010)
                                    Scope(2002)
                                      IdentifierOrCall(2004)
                                        IDENTIFIER(1023): "married", line: 23, col: 40
                    DELIMITER(1005): ",", line: 23, col: 47
                    Expression(2017)
                      OrTerm(2016)
                        AndTerm(2015)
                          EqTerm(2014)
                            RelateTerm(2013)
                              AddTerm(2012)
                                MulTerm(2011)
                                  Factor(2010)
                                    Scope(2002)
                                      IdentifierOrCall(2004)
                                        IDENTIFIER(1023): "h_name", line: 23, col: 49
                  CLOSE_PARENT(1007): ")", line: 23, col: 55
                EQUALS(1011): "=", line: 23, col: 57
                Context(2007)
                  OPEN_TABLE(1002): "{", line: 23, col: 59
                  List(2008)
                    IdentifierOrCall(2004)
                      IDENTIFIER(1023): "union", line: 23, col: 60
                    EQUALS(1011): "=", line: 23, col: 66
                    Context(2007)
                      Expression(2017)
                        OrTerm(2016)
                          AndTerm(2015)
                            EqTerm(2014)
                              RelateTerm(2013)
                                AddTerm(2012)
                                  MulTerm(2011)
                                    Factor(2010)
                                      Scope(2002)
                                        IdentifierOrCall(2004)
                                          IDENTIFIER(1023): "husband_name", line: 23, col: 68
                  CLOSE_TABLE(1003): "}", line: 23, col: 80
                IdentifierOrCall(2004)
                  IDENTIFIER(1023): "if", line: 24, col: 4
                  OPEN_PARENT(1006): "(", line: 24, col: 6
                  CallArgs(2005)
                    Expression(2017)
                      OrTerm(2016)
                        AndTerm(2015)
                          EqTerm(2014)
                            RelateTerm(2013)
                              AddTerm(2012)
                                MulTerm(2011)
                                  Factor(2010)
                                    Scope(2002)
                                      IdentifierOrCall(2004)
                                        IDENTIFIER(1023): "has_family", line: 24, col: 7
                          AND(1008): "and", line: 24, col: 18
                          EqTerm(2014)
                            RelateTerm(2013)
                              AddTerm(2012)
                                MulTerm(2011)
                                  Factor(2010)
                                    NOT(1010): "not", line: 24, col: 22
                                    Scope(2002)
                                      IdentifierOrCall(2004)
                                        IDENTIFIER(1023): "h_name", line: 24, col: 26
                    DELIMITER(1005): ",", line: 24, col: 32
                    Expression(2017)
                      OrTerm(2016)
                        AndTerm(2015)
                          EqTerm(2014)
                            RelateTerm(2013)
                              AddTerm(2012)
                                MulTerm(2011)
                                  Factor(2010)
                                    Scope(2002)
                                      IdentifierOrCall(2004)
                                        IDENTIFIER(1023): "f_name", line: 24, col: 34
                  CLOSE_PARENT(1007): ")", line: 24, col: 40
                EQUALS(1011): "=", line: 24, col: 42
                Context(2007)
                  OPEN_TABLE(1002): "{", line: 24, col: 44
                  List(2008)
                    IdentifierOrCall(2004)
                      IDENTIFIER(1023): "union", line: 24, col: 45
                    EQUALS(1011): "=", line: 24, col: 51
                    Context(2007)
                      Expression(2017)
                        OrTerm(2016)
                          AndTerm(2015)
                            EqTerm(2014)
                              RelateTerm(2013)
                                AddTerm(2012)
                                  MulTerm(2011)
                                    Factor(2010)
                                      Scope(2002)
                                        IdentifierOrCall(2004)
                                          IDENTIFIER(1023): "family_name", line: 24, col: 53
                  CLOSE_TABLE(1003): "}", line: 24, col: 64
                IdentifierOrCall(2004)
                  IDENTIFIER(1023): "if", line: 25, col: 4
                  OPEN_PARENT(1006): "(", line: 25, col: 6
                  CallArgs(2005)
                    Expression(2017)
                      OrTerm(2016)
                        AndTerm(2015)
                          EqTerm(2014)
                            RelateTerm(2013)
                              AddTerm(2012)
                                MulTerm(2011)
                                  Factor(2010)
                                    NOT(1010): "not", line: 25, col: 7
                                    Scope(2002)
                                      IdentifierOrCall(2004)
                                        IDENTIFIER(1023): "h_name", line: 25, col: 11
                          AND(1008): "and", line: 25, col: 18
                          EqTerm(2014)
                            RelateTerm(2013)
                              AddTerm(2012)
                                MulTerm(2011)
                                  Factor(2010)
                                    NOT(1010): "not", line: 25, col: 22
                                    Scope(2002)
                                      IdentifierOrCall(2004)
                                        IDENTIFIER(1023): "f_name", line: 25, col: 26
                  CLOSE_PARENT(1007): ")", line: 25, col: 32
                EQUALS(1011): "=", line: 25, col: 34
                Context(2007)
                  OPEN_TABLE(1002): "{", line: 25, col: 36
                  List(2008)
                    IdentifierOrCall(2004)
                      IDENTIFIER(1023): "union", line: 25, col: 37
                    EQUALS(1011): "=", line: 25, col: 43
                    Context(2007)
                      Expression(2017)
                        OrTerm(2016)
                          AndTerm(2015)
                            EqTerm(2014)
                              RelateTerm(2013)
                                AddTerm(2012)
                                  MulTerm(2011)
                                    Factor(2010)
                                      Scope(2002)
                                        IdentifierOrCall(2004)
                                          IDENTIFIER(1023): "new_name", line: 25, col: 45
                                          OPEN_PARENT(1006): "(", line: 25, col: 53
                                          CallArgs(2005)
                                            Expression(2017)
                                              OrTerm(2016)
                                                AndTerm(2015)
                                                  EqTerm(2014)
                                                    RelateTerm(2013)
                                                      AddTerm(2012)
                                                        MulTerm(2011)
                                                          Factor(2010)
                                                            Scope(2002)
                                                              IdentifierOrCall(2004)
                                                                IDENTIFIER(1023): "culture_second_names", line: 25, col: 54
                                          CLOSE_PARENT(1007): ")", line: 25, col: 74
                  CLOSE_TABLE(1003): "}", line: 25, col: 75
              CLOSE_TABLE(1003): "}", line: 26, col: 3
            IdentifierOrCall(2004)
              IDENTIFIER(1023): "set", line: 27, col: 3
              OPEN_PARENT(1006): "(", line: 27, col: 6
              CallArgs(2005)
                Expression(2017)
                  OrTerm(2016)
                    AndTerm(2015)
                      EqTerm(2014)
                        RelateTerm(2013)
                          AddTerm(2012)
                            MulTerm(2011)
                              Factor(2010)
                                Scope(2002)
                                  IdentifierOrCall(2004)
                                    IDENTIFIER(1023): "generated", line: 27, col: 7
              CLOSE_PARENT(1007): ")", line: 27, col: 16
            EQUALS(1011): "=", line: 27, col: 18
            Context(2007)
              Expression(2017)
                OrTerm(2016)
                  AndTerm(2015)
                    EqTerm(2014)
                      RelateTerm(2013)
                        AddTerm(2012)
                          MulTerm(2011)
                            Factor(2010)
                              Scope(2002)
                                IdentifierOrCall(2004)
                                  IDENTIFIER(1023): "true", line: 27, col: 20
          CLOSE_TABLE(1003): "}", line: 28, col: 2
      CLOSE_TABLE(1003): "}", line: 29, col: 1
